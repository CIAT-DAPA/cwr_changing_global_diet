gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
# dodge <- position_dodge(width=0.9)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge")
gg <- gg + geom_errorbar(limits, position = "dodge", width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
# dodge <- position_dodge(width=0.9)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge")
gg <- gg + geom_errorbar(aes(fill = Period), limits, position = "dodge", width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
rm(dodge)
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
# dodge <- position_dodge(width=0.9)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge")
gg <- gg + geom_errorbar(aes(fill = Period), limits, position = "dodge", width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(limits, position = "dodge", width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
dodge <- position_dodge(width = 1)
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 1)
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(limits, position = dodge, width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 0.1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(limits, position = dodge, width=0.25)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 0.1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(limits, position = dodge, width=0.1)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 0.1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(limits, stat = "identity", position = dodge, width=0.1)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 0.1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(fill = Period), limits, position = dodge, width=0.1)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
limits <- aes(ymax = prec + sd_prec, ymin=prec - sd_prec)
dodge <- position_dodge(width = 0.1)
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(color = Period), limits, position = dodge, width=0.1)
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin=prec - sd_prec, ymax=prec + sd_prec), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin = prec - sd_prec, ymax = prec + sd_prec, colour = Period), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin = prec - sd_prec, ymax = prec + sd_prec, group = Period), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==1 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone1_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==2 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin = prec - sd_prec, ymax = prec + sd_prec, group = Period), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==2 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==2 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==2 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone2_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==3 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin = prec - sd_prec, ymax = prec + sd_prec, group = Period), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==3 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==3 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==3 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone3_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
gg <- ggplot(data = all_data3[all_data3$zone==4 & all_data3$varID=='mean',], aes(x = month, y = prec)) + geom_bar(aes(fill = Period), stat = "identity", position = "dodge") + geom_errorbar(aes(ymin = prec - sd_prec, ymax = prec + sd_prec, group = Period), width=.2, position=position_dodge(.9))
gg <- gg + theme_bw() + xlab('Months') + ylab('Precipitation (mm)')
gg <- gg + theme(legend.position="top")
gg <- gg + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
gg2 <- ggplot(data = all_data3[all_data3$zone==4 & all_data3$varID=='mean',], aes(x = month, y = tmean)) + geom_line(aes(colour = Period, group = Period))
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==4 & all_data3$varID=='mean',], aes(x = month, y = tmin, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + geom_line(data = all_data3[all_data3$zone==4 & all_data3$varID=='mean',], aes(x = month, y = tmax, colour = Period, group = Period), linetype = 2)
gg2 <- gg2 + theme_bw() + xlab('Months') + ylab(expression("Temperature ("*~degree*C*")"))
gg2 <- gg2 + scale_y_continuous(limits = c(0, 36))
gg2 <- gg2 + theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank())
png(filename = "../zone4_1.png", width = 9, height = 8, units = 'in', res = 300)
ggplot_dual_axis(gg, gg2, "y")
dev.off()
g=gc()
rm(list=ls())
options(warn = -1)
options(scipen = 999)
# load packages
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(ggplot2))
suppressMessages(library(caroline))
suppressMessages(library(purrr))
suppressMessages(library(broom))
suppressMessages(library(ggplot2))
setwd("~/GitHub/cwr_changing_global_diet/r_script/data")
all_data <- read.csv('all_1961_2009_final_analysis_data_completeready.csv')
gFood <- read.csv('FBS_commodities_foodgroups_regions_finaltest.csv')
gFood <- gFood %>% dplyr::select(Item:food_group) %>% unique
View(gFood)
all_data2 <- dplyr::left_join(all_data, gFood, by=c('Item'))
rm(all_data, gFood)
View(all_data2)
all_data2 <- all_data2 %>% tidyr::gather(Year, Value, Y1961:Y2009)
all_data2$Year <- as.numeric(gsub(pattern='Y', replacement='', x=all_data2$Year))
View(all_data2)
all_data2 <- all_data2 %>% mutate(year1960 = Year - 1960)
all_data2 <- all_data2 %>%
filter(Item == "Animal Products (Total)")
by_country <- all_data2 %>%
group_by(Element, Country) %>%
nest()
country_model <- function(df){
lm(Value ~ year1960, data=df)
}
models <- by_country %>%
mutate(
model = data %>% map(country_model)
)
models
models <- models %>%
mutate(
glance  = model %>% map(broom::glance),
rsq     = glance %>% map_dbl("r.squared"),
tidy    = model %>% map(broom::tidy),
augment = model %>% map(broom::augment)
)
models
models %>% arrange(desc(rsq))
models %>%
ggplot(aes(rsq, reorder(Country, rsq))) +
geom_point(aes(colour = Element))
models %>%
ggplot(aes(rsq, reorder(Country, rsq))) +
geom_point(aes(colour = Element)) + theme_dark()
models %>%
unnest(tidy) %>%
dplyr::select(Element, Country, term, estimate, rsq) %>%
spread(term, estimate) %>%
ggplot(aes(`(Intercept)`, year1960)) +
geom_point(aes(colour = Element, size = rsq)) +
geom_smooth(se = FALSE) +
xlab("Animal products consumption") +
ylab("Yearly improvement") +
scale_size_area()
models %>%
unnest(augment) %>%
ggplot(aes(year1960, .resid)) +
geom_line(aes(group = Country), alpha = 1/3) +
geom_smooth(se = FALSE) +
geom_hline(yintercept = 0, colour = "white") +
facet_wrap(~Element)
View(all_data2)
names(all_data2)
head(Value)
head(all_data2)
View(all_data2 %>% group_by(Country, Element, Unit, food_group, Year) %>% summarise(sum(Value)))
all_data3 <- all_data2 %>% group_by(Country, Element, Unit, food_group, Year) %>% summarise(sum(Value)))
all_data3 <- all_data2 %>% group_by(Country, Element, Unit, food_group, Year) %>% summarise(sum(Value))
names(all_data3)[ncol(all_data3)] <- 'Value'
head(all_data3)
abbreviate(all_data3$food_group)
unique(abbreviate(all_data3$food_group))
View(all_data3)
g=gc()
rm(list=ls)
rm(list=ls())
options(warn = -1)
options(scipen = 999)
# load packages
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(ggplot2))
suppressMessages(library(caroline))
suppressMessages(library(purrr))
suppressMessages(library(broom))
suppressMessages(library(ggplot2))
all_data <- read.csv('all_1961_2009_final_analysis_data_completeready.csv')
gFood <- read.csv('FBS_commodities_foodgroups_regions_finaltest.csv')
gFood <- gFood %>% dplyr::select(Item:food_group) %>% unique
all_data2 <- dplyr::left_join(all_data, gFood, by=c('Item'))
rm(all_data, gFood)
all_data2 <- all_data2 %>% tidyr::gather(Year, Value, Y1961:Y2009)
all_data2$Year <- as.numeric(gsub(pattern='Y', replacement='', x=all_data2$Year))
# create data sources
all_data3 <- all_data2 %>% group_by(Country, Element, Unit, food_group, Year) %>% summarise(sum(Value))
names(all_data3)[ncol(all_data3)] <- 'Value'
unique(abbreviate(all_data3$food_group))
tolower(abbreviate(all_data3$food_group))
all_data3$food_group <- tolower(abbreviate(all_data3$food_group))
View(all_data3)
all_data3$Country
unique(all_data3$Country)
names(all_data3)
all_data3 <- all_data3 %>% filter(Country %in% c('Colombia', 'India', 'Germany', 'France', 'Argentina', 'Japan'))
View(all_data3)
all_data3$Element %>% unique
all_data3$Element %>% unique %>% as.character
measures <- all_data3$Element %>% unique %>% as.character
i=1
subData <- all_data3 %>% dplyr::filter(Element == measures[i])
subData$Value <- round(subData$Value, 1)
View(subData)
subData$Country <- tolower(subData$Country)
View(all_data3)
subData <- all_data3 %>% dplyr::filter(Element == measures[i])
subData$Value <- round(subData$Value, 1)
subData$Country <- tolower(subData$Country)
View(subData)
subData$combination <- paste(subData$Country, '_', subData$food_group, sep = '')
View(subData)
names(subData)
head(subData)
subData <- subData %>% select(Year, Value, combination)
subData <- all_data3 %>% dplyr::filter(Element == measures[i])
subData$Value <- round(subData$Value, 1)
subData$Country <- tolower(subData$Country)
subData$combination <- paste(subData$Country, '_', subData$food_group, sep = '')
subData <- subData[c('Year', 'Value', 'combination')]
View(subData)
subData <- subData %>% spread(key = combination, value = Value)
View(subData)
colnames(subData)[1] <- 'year'
View(subData)
measures
measures
nicerNms <- c('fat', 'calories', 'food_quantity', 'protein')
paste(nicerNms[i], '.tsv', sep = '')
lapply(1:length(measures), function(i){
subData <- all_data3 %>% dplyr::filter(Element == measures[i])
subData$Value <- round(subData$Value, 1)
subData$Country <- tolower(subData$Country)
subData$combination <- paste(subData$Country, '_', subData$food_group, sep = '')
subData <- subData[c('Year', 'Value', 'combination')]
subData <- subData %>% spread(key = combination, value = Value)
colnames(subData)[1] <- 'year'
write.delim(subData, paste(nicerNms[i], '.tsv', sep = ''))
})
unique(tolower(abbreviate(all_data3$food_group)))
unique(all_data3$food_group)
unique(all_data2$food_group)
unique(sort(as.character(all_data2$food_group)))
install.packages('landsat
')
install.packages('landsat')
library(landsat)
install.packages('RStoolbox')
library(RStoolbox)
?radCor
install.packages('rLandsat8')
library(devtools)
install_url("https://github.com/Terradue/rLandsat8/releases/download/v0.1-SNAPSHOT/rLandsat8_0.1.0.tar.gz")
library(rLandsat8)
